image: Visual Studio 2022

platform:
  - x64

only_commits:
  # Commit messages must contain the following word in the commit message
  message: /dist|release/

cache:
  - node_modules
  - '%USERPROFILE%\.electron'
  - '%USERPROFILE%\.electron-delta'

environment:
  GH_TOKEN:
    secure: pE08oKmj7iPPEnU7EahJiJCsDQia05xr3abdppggRYLAlWzbECmmfSj9kvwNJPka

init:
  - git config --global core.autocrlf input

install:
  - ps: Update-NodeJsInstallation 16.14.2 x64
  - npm install

build_script:
  - node change-version.js
  - npm run release

test: off
